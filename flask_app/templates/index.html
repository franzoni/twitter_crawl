{% extends "main.html" %}
{% block content %}
{% include "header.html" %}

<style>
.ui-helper-hidden-accessible { border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px; 
}
.ui-autocomplete .highlight {
	text-decoration: underline;
	color: orange;
}
.fixed-height {
	padding: 1px;
	max-height: 200px;
	overflow: auto;
}
.ui-autocomplete-category {
	font-weight: bold;
	padding: .2em .4em;
	margin: .8em 0 .2em;
	line-height: 1.5;
}
.ui-autocomplete .highlight {
	text-decoration: underline;
	color: orange;
}
href{
  color: red;
}

.ui-helper-hidden-accessible { border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px; 
}
.ui-autocomplete .highlight {
	text-decoration: underline;
	color: orange;
}
.fixed-height {
	padding: 1px;
	max-height: 200px;
	overflow: auto;
}
.ui-autocomplete-category {
	font-weight: bold;
	padding: .2em .4em;
	margin: .8em 0 .2em;
	line-height: 1.5;
}
.ui-menu .ui-menu-item .ui-state-focus {
  background: #ff0030;
  border: none;
  color: #ffffff;
}
</style>


<main>
<section>	  
  <div class="container">
    <br> Tweet autocompleteion <label for="search_post_data"></label>
    <input id="search_post_data" name="search_post_data" placeholder="Select a resource or enter your own, e.g. Wormbase"></input>
  </div>

  <br><br><br><br>
</section>
</main>



<script type="text/javascript">
  // Send data to autocomplete to dynamically extend data source
    $(document).ready(function(){
	console.log("AAAAAAAAA");
	$(document).on('keyup', function(e){
            var text = e.target.value;
	    console.log(text);
            $("#search_post_data").autocomplete({
  		source: function(request, response) {
  		    $.ajax({url: '{{ url_for("datcomplete") }}',
  			    contentType: 'application/json',
  			    method: "POST",
  			    dataType : 'json',
  			    data: JSON.stringify({variable:text}),
  			    success: function(data) { console.log(data);
						      response(data.suggestions); }
  			   }
  			  );
  		}
  	    });
	/// 	.data("ui-autocomplete")._renderItem = function(ul, items) {
	/// 	console.log("OOOOOOOOOOOOO");
	/// 	console.log(items);
	/// 	var ii = 0;
	/// 	for(ii=0; ii<items.lenght; ii++) {
	/// 	    item = items[ii]
	/// 	    console.log(item.label);
	/// 	    var $a = $("<a></a>").text(item.label);
	/// 	}
	/// 	return $("<li></li>").append($a).appendTo(ul);
	///     };
	});
	
    });

  
/// $(document).ready(function() {
///   /// var keypath = "My Test Keypath"
///   /// console.log(keypath)
/// 
///   $("#search_post_data").keyup(function(e){
///    
///   var keypath = e.target.value;
///   $.ajax({
///         url: '{{ url_for("datcomplete") }}',
///         contentType: 'application/json',
///         method: "POST",
///         dataType : 'json',
///         data: JSON.stringify({variable:keypath})
///     }).done(function (data) {
///         console.log(data)
///         $("#search_post_data").autocomplete({
///             source: data.matching_results,
///             minLength: 1
///         }).data("ui-autocomplete")._renderItem = function(ul, item) {
///           var $a = $("<a></a>").text(item.label);
///           //highlightText(this.term, $a);
///           return $("<li></li>").append($a).appendTo(ul);
///         };
///     });
///   });
/// });
</script>


{% endblock %}
